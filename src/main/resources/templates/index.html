<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>Chat App</title>
</head>
<body>


<h1> Peer to peer chat program</h1>
<table>
  <form action="/register" method="post">

    <tr>
      <th><span>Current user:</span></th>
      <th><span th:if="${param.username != null}"
                th:text="|${param.username[0]}|">placeholder message</span></th>

    </tr>
    <tr>
      <td><span>Change user:</span></td>
      <td><input type="text" name="username" th:placeholder="${param.username[0]}"/></td>
      <td><input type="submit" value="change"/></td>
    </tr>
  </form>
</table>

<table th:each="message : ${messageRepository}">
  <tr>
    <td th:text="'User: ' + ${message.getUsername()}"></td>
  </tr>
  <tr>
    <td th:text="'Message: ' + ${message.getText()}"></td>
    <hr/>
  </tr>
</table>

<form action="/savemessage" method="post">
<textarea name="text" rows="10" cols="30">
Enter your message here
</textarea>
  <input type="submit" value="send"/>
</form>

</body>
</html>